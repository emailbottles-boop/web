<script>
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
document.body.classList.add(isMobile ? "mobile" : "desktop");

/* SAFE ELEMENT LOOKUPS */
const home = document.getElementById("home");
const updates = document.getElementById("updates");
const plushy = document.getElementById("plushy");
const cryptoField = document.getElementById("cryptoField");
const emailInput = document.getElementById("emailInput");

const enterBtn = document.getElementById("enterBtn");
const plushyBtn = document.getElementById("plushyBtn");
const backFromUpdates = document.getElementById("backFromUpdates");
const backFromPlushy = document.getElementById("backFromPlushy");

/* ALWAYS SHOW HOME FIRST */
home.classList.remove("hidden");
updates.classList.add("hidden");
plushy.classList.add("hidden");

/* SAFE PAGE SWITCH */
function swap(hide, show) {
  if (!hide || !show) return;
  hide.classList.add("hidden");
  show.classList.remove("hidden");
  if (cryptoField) cryptoField.innerHTML = "";
}

/* BUTTON EVENTS */
if (enterBtn) {
  enterBtn.addEventListener("click", () => swap(home, updates));
}

if (plushyBtn) {
  plushyBtn.addEventListener("click", () => swap(home, plushy));
}

if (backFromUpdates) {
  backFromUpdates.addEventListener("click", () => swap(updates, home));
}

if (backFromPlushy) {
  backFromPlushy.addEventListener("click", () => swap(plushy, home));
}

/* BACKGROUND PARALLAX (DESKTOP ONLY) */
if (!isMobile) {
  document.addEventListener("mousemove", e => {
    document.body.style.setProperty("--mx", e.clientX + "px");
    document.body.style.setProperty("--my", e.clientY + "px");
  });
}

/* CRYPTO LETTERS â€” EVEN DISTRIBUTION */
if (emailInput) {
  emailInput.addEventListener("input", e => {
    const char = e.data;
    if (!char || !/[a-zA-Z@._-]/.test(char)) return;
    if (cryptoField.children.length > 28) return;

    const el = document.createElement("div");
    el.className = "crypto";
    el.textContent = char.toUpperCase();

    /* EVEN SCREEN DISTRIBUTION */
    const x = Math.random();
    const y = Math.random();
    el.style.left = `${x * 100}vw`;
    el.style.top = `${y * 100}vh`;

    el.style.fontSize = (Math.random() * 26 + 18) + "vw";
    el.style.transform = `rotate(${Math.random() > 0.5 ? 180 : 0}deg)`;

    cryptoField.appendChild(el);
    setTimeout(() => el.remove(), 8000);
  });
}
</script>
